<html lang="ja">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./map.css" type="text/css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
</head>
<body>
    <div id="header">
        <div id="title">
            <div id="titletext">
                <h1>エクストラ・バレット </h1>
                <h1 id="maptitle" class="modechange">フィールドマップメーカー</h1>
                <h1 id="temptitle" class="modechange">範囲テンプレートメーカー</h1>
            </div>
            <div id="credithelp">
                <h3 id="credit">制作：ニラサカ (X：<a href="https://twitter.com/JumpOnLily_pad">@JumpOnLily_pad</a>)</h3>
                <h3 id="help">？</h3>
                <div id="helpwindow">
                    <div id="helptext">
                        <h3>使い方</h3>
                        <p>左上の「テ/マ」ボタンでフィールドマップメーカーと範囲テンプレートメーカーを切り替えることができます。</p>
                        <br>
                        <h4>〇フィールドマップメーカー</h4>
                        <p>①マップのサイズ(縦横)を設定します。</p>
                        <p>②ペンモードを選択中、マップのマスをマウスでなぞるとペンの色で染色できます。</p>
                        <p>③スポイトモードを選択中、マップ上のマスの色をペンの色にすることができます。</p>
                        <p>④「初期化」ボタンを押すことで、マップ上の染色をリセットします。</p>
                        <p>⑤「保存」ボタンを押すことで、現在のマップを画像でダウンロードできます。</p>
                        <br>
                        <h4>〇範囲テンプレートメーカー</h4>
                        <p>①範囲タイプを選択し、各パラメータを設定することでテンプレートを作成できます。</p>
                        <p>②カラーパレットでベースカラーを設定でき、任意の不透明度にすることができます。</p>
                        <p>③射程モードのテンプレート中央にある●はプレイヤーの位置を表しています。</p>
                        <p>④カスタムモードではマスを染色することで、任意の形のテンプレートを作成できます。</p>
                        <p>④「初期化」ボタンを押すことで、カスタムテンプレート上の染色をリセットします。</p>
                        <p>⑤「保存」ボタンを押すことで、現在のテンプレートを画像でダウンロードできます。その際、ボーダー(黒い枠線)は透過された状態の画像が保存されます。</p>
                    </div>
                </div>
            </div>
        </div>
    
        <div id="controls">
            <a href="#" id="trigger" class="ctrlcontents modechange">
                <div id="td1" class="modechange"></div>
                <div id="td2" class="modechange"></div>
                <div id="td3" class="modechange"></div>
            </a>

            <select name="rangetype" id="rangetype" class="ctrlcontents modechange">
                <option value="circle">円形範囲</option>
                <option value="cross">十字範囲</option>
                <option value="fan">扇状範囲</option>
                <option value="rifle">射程範囲</option>
                <option value="custom">カスタム</option>
            </select>

            <div id="circlemenu" class="ctrlcontents">
                <select name="circles" id="circlesize" class="modechange">
                    <option value="9">9</option>
                    <option value="13">13</option>
                    <option value="25">25</option>
                </select>
            </div>

            <div id="fanmenu" class="ctrlcontents">
                <label><input type="number" id="fansize" class="modechange" value="2" min="1">の二乗</label>
            </div>

            <div id="riflemenu" class="ctrlcontents">
                <label>
                    <input type="number" id="riflemin" class="riflerange modechange" value="1" min="1">
                    ～
                    <input type="number" id="riflemax" class="riflerange modechange" value="3">
                </label>
            </div>

            <div id="mapparam" class="ctrlcontents modechange">
                <label>横<input type="number" id="mapwidth" class="mapsize modechange" value="10" min="1"/></label>
                <label>縦<input type="number" id="mapheight" class="mapsize modechange" value="10" min="1"/></label>
            </div>

            <div id="rangeparam" class="ctrlcontents">
                <label>横<input type="number" id="rangewidth" class="rangesize modechange" value="3" min="1"/></label>
                <label>縦<input type="number" id="rangeheight" class="rangesize modechange" value="3" min="1"/></label>
            </div>

            <div id="penparam" class="ctrlcontents">
                <input type="color" list="color" id="penColor"/>
                <label id="alpha"  class="modechange">不透明度<input type="number" name="alpha" id="alphanum"  value="0.5" max="1.0" min="0.1" step="0.1"></label>
                <div id="penradio" class="modechange">
                    <label><input type="radio" name="penOps" value="pen" checked>ペン</label>
                    <label><input type="radio" name="penOps" value="syringe">スポイト</label>
                    <label id="eraser"><input type="radio" name="penOps" value="eraser">消しゴム</label>
                </div>
            </div>

            <div id="btns" class="ctrlcontents">
                <button id="initbtn" class="modechange">初期化</button>

                <!--画像化-->
                <button id="dltablebtn" class="modechange">保存</button>
                <a id="download" href="#" download=""></a>
            </div>
        </div>

    </div>

    <div id="workspace">
        <div id="mapdisplay" class="modechange">
            <table id="map"></table>
        </div>
        <div id="rangedisplay" class="modechange">
            <table id="range"></table>
        </div>
    </div>

    <img id="image" name="image" src="" />
    <script src="./map.js"></script>
</body>
</html>
